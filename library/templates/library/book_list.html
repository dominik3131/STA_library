{% extends "base.html" %}
{% block nav-books %}
<a class="nav-link active" href="/books">Books</a>
{% endblock %}
{% block content %}

<div class="container-fluid">
  <h2>Books</h2>
  <a href="/books/create">
    <button type="button" class="btn btn-primary">Add new book</button>
  </a>
  <div class="container">
    <form action="/books" method="get">
      <div class="row">
        <div class="col-sm-9">
          <input
            id="al-search"
            type="text"
            name="query"
            value="{{ request.GET.query }}"
            class="form-control"
          />
        </div>
        <div class="col-sm-3">
          <input type="submit" value="Search" class="btn btn-success" />
        </div>
      </div>
    </form>
  </div>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Authors</th>
        <th scope="col">Details</th>
      </tr>
    </thead>
    <tbody>
      {% for book in object_list %}
      <tr>
        <th scope="row">{{book.title}}</th>
        <td>{{ book.authors.all|join:", " }}</td>
        <td>
          <a href="/books/{{book.id}}/details">
            <button type="button" class="btn btn-primary">Details</button>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
